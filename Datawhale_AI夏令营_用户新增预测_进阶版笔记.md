# Datawhale AIå¤ä»¤è¥ - ç”¨æˆ·æ–°å¢é¢„æµ‹æŒ‘æˆ˜èµ›è¿›é˜¶ç¬”è®°

## ğŸš€ é¡¹ç›®èƒŒæ™¯

æœ¬é¡¹ç›®æºäºè®¯é£å¼€æ”¾å¹³å°çš„çœŸå®ä¸šåŠ¡æŒ‘æˆ˜ï¼Œç›®æ ‡æ˜¯åŸºäºç”¨æˆ·è¡Œä¸ºæ•°æ®é¢„æµ‹æŸç”¨æˆ·æ˜¯å¦ä¸ºæ–°å¢ç”¨æˆ·ï¼ˆ`is_new_did`ï¼‰ï¼Œå±äºç»å…¸çš„ **ä¸å¹³è¡¡äºŒåˆ†ç±»é—®é¢˜**ã€‚ä¼˜åŒ–åæ¨¡å‹å·²ä» F1 â‰ˆ 0.86 æå‡è‡³ F1 â‰ˆ 0.93ã€‚

---

## ğŸ”§ æ•°æ®é¢„å¤„ç†ä¸é«˜çº§ç‰¹å¾å·¥ç¨‹

### ğŸ•’ æ—¶é—´ç‰¹å¾å¢å¼º
- å°† `common_ts` è½¬æ¢ä¸ºï¼š
  - `hour`, `day`, `dayofweek`
  - `time_bucket`ï¼šå°†ä¸€å¤©åˆ†ä¸º 4 ä¸ªæ—¶é—´æ®µç”¨äºè¡Œä¸ºåˆ†æ®µ

### ğŸ” JSONå­—æ®µç»“æ„åŒ–
- `udmap` å­—æ®µä¸º JSON æ ¼å¼ï¼Œæå– `botId`, `pluginId` ä½œä¸ºå•ç‹¬ç‰¹å¾ä½¿ç”¨

### ğŸ” ç»„åˆäº¤å‰ç‰¹å¾
- `device_os = device_brand + os_type`ï¼šåæ˜ è®¾å¤‡ä¸ç³»ç»Ÿçš„è”åŠ¨åå¥½

### ğŸ§® ç”¨æˆ·èšåˆç‰¹å¾ï¼ˆåŸºäº `did`ï¼‰
- èšåˆå­—æ®µåŒ…æ‹¬ï¼š`eid`, `mid`, `hour`, `common_ts` ç­‰
- æ´¾ç”Ÿç‰¹å¾å¦‚ï¼š
  - `base_events_per_mid`ï¼šå¹³å‡äº‹ä»¶é¢‘ç‡
  - `base_activity_variation`ï¼šè¡Œä¸ºå¤šæ ·æ€§

---

## âš™ï¸ æ¨¡å‹æ„å»ºä¸è®­ç»ƒé€»è¾‘

### ğŸ§  ä½¿ç”¨æ¨¡å‹
- LightGBMï¼Œå¤©ç„¶æ”¯æŒç±»åˆ«å˜é‡ã€é«˜æ•ˆå¤„ç†ç»“æ„åŒ–æ•°æ®

### ğŸ¯ æ¨¡å‹å‚æ•°ï¼ˆä¼˜åŒ–åï¼‰

```python
params = {
    'objective': 'binary',
    'metric': 'binary_logloss',
    'max_depth': 10,
    'num_leaves': 63,
    'learning_rate': 0.05,
    'feature_fraction': 0.8,
    'bagging_fraction': 0.8,
    'bagging_freq': 5,
    ...
}
```

### ğŸ§ª äº¤å‰éªŒè¯æ–¹æ¡ˆ
- `StratifiedKFold(n_splits=5)`
- æ¯æŠ˜é¢„æµ‹ `X_test` åè¿›è¡ŒåŠ æƒå¹³å‡ï¼ˆæ¨¡å‹é›†æˆï¼‰

---

## ğŸ” é˜ˆå€¼ä¼˜åŒ–ä¸è¯„ä¼°ç­–ç•¥

### ğŸ“ åŠ¨æ€é˜ˆå€¼æœç´¢
```python
np.arange(0.05, 0.95, 0.01)
```
- åœ¨éªŒè¯é›†ä¸Šæ‰¾åˆ°æœ€ä½³ F1 å¯¹åº”çš„æ¦‚ç‡é˜ˆå€¼

### ğŸ“Š æ¨¡å‹è¯„ä¼°æŒ‡æ ‡
- å¹³å‡ F1ï¼ˆ5æŠ˜ï¼‰
- OOFï¼ˆOut-of-Foldï¼‰é¢„æµ‹ F1

---

## ğŸ“ æäº¤æ–‡ä»¶æ„å»º

```python
df_submit['is_new_did'] = (test_preds >= avg_th).astype(int)
df_submit['proba'] = test_preds
df_submit.to_csv('submit_advanced.csv')
```

å­—æ®µè¯´æ˜ï¼š
- `is_new_did`ï¼šæœ€ç»ˆé¢„æµ‹æ ‡ç­¾
- `proba`ï¼šé¢„æµ‹æ¦‚ç‡å€¼ï¼ˆå¯ç”¨äº ensembleï¼‰

---

## âœ… æœ€ç»ˆç»“æœ

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| CV å¹³å‡ F1 | ~0.93 |
| æäº¤æ–‡ä»¶å | `submit_advanced.csv` |
| æ¨¡å‹æ•°é‡ | 5ï¼ˆäº¤å‰éªŒè¯é›†æˆï¼‰ |

---

## ğŸ’¡ å¯è¿›ä¸€æ­¥ä¼˜åŒ–æ–¹å‘

- å¼•å…¥ç›®æ ‡ç¼–ç ï¼ˆTarget Encodingï¼‰
- ä½¿ç”¨ TF-IDF è¡¨è¾¾ç±»åˆ«å…³é”®è¯å·®å¼‚
- è¿›è¡Œä¸¤é˜¶æ®µå»ºæ¨¡ï¼ˆç”¨æˆ·å±‚+äº‹ä»¶å±‚ï¼‰
- åŠç›‘ç£å­¦ä¹ ç­–ç•¥ï¼šåˆ©ç”¨ä¼ªæ ‡ç­¾å¼ºåŒ–æ¨¡å‹è®­ç»ƒ
- å°è¯•æ¨¡å‹èåˆï¼ˆå¦‚ Stacking + CatBoostï¼‰

---

ğŸ“š é¡¹ç›®ä»£ç æ–‡ä»¶ï¼š`LightGBM ä¼˜åŒ–å¢å¼ºç‰ˆ baseline`  
ğŸ“ å»ºè®®ç»“åˆ Notebook æˆ– wandb åšå¯è§†åŒ–è¿½è¸ª

